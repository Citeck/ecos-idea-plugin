<idea-plugin>
    <id>ru.citeck.ecos</id>
    <name>ECOS Idea</name>
    <vendor email="" url="http://citeck.ru">Citeck</vendor>

    <description><![CDATA[ECOS Idea Plugin]]></description>

    <!-- please see https://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.plugins.yaml</depends>
    <depends optional="true" config-file="plugin-maven.xml">org.jetbrains.idea.maven</depends>
    <depends optional="true" config-file="plugin-ultimate.xml">JavaScript</depends>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="ru.citeck.ecos.files.FileTypeService"/>
        <applicationService serviceImplementation="ru.citeck.ecos.rest.EcosRestApiService"/>
        <projectService serviceImplementation="ru.citeck.ecos.index.IndexesService"/>
        <projectService serviceImplementation="ru.citeck.ecos.ui.AlfrescoJsConsoleService"/>
        <projectService serviceImplementation="ru.citeck.ecos.index.indexers.qname.QNameService"/>
        <searchScopesProvider implementation="ru.citeck.ecos.files.scopes.SearchScopeProvider"/>
        <fileBasedIndex implementation="ru.citeck.ecos.index.EcosIndex"/>
        <consoleFilterProvider implementation="ru.citeck.ecos.console.NodeRefConsoleFilterProvider"/>
        <searchEverywhereContributor implementation="ru.citeck.ecos.EcosSearchEveryWhereContributor$Factory"/>
        <psi.referenceContributor implementation="ru.citeck.ecos.references.EcosReferenceProvider$Contributor"
                                  language=""/>
        <localInspection implementationClass="ru.citeck.ecos.inspections.forms.DuplicateComponentKeyInspection"
                         language="JSON"
                         enabledByDefault="true" level="ERROR" displayName="ECOS form component duplicate key"
                         groupName="JSON"/>

        <completion.contributor implementationClass="ru.citeck.ecos.completion.java.JavaCompletionContributor"
                                language="JAVA"/>
        <completion.contributor implementationClass="ru.citeck.ecos.completion.json.JsonCompletionContributor"
                                language="JSON"/>

        <liveTemplateMacro implementation="ru.citeck.ecos.livetemplates.functions.JavaQNameEnumMacro"/>
        <liveTemplateMacro implementation="ru.citeck.ecos.livetemplates.functions.alfresco.AlfrescoAnyEnumMacro"/>
        <liveTemplateMacro implementation="ru.citeck.ecos.livetemplates.functions.alfresco.AlfrescoTypeEnumMacro"/>
        <liveTemplateMacro implementation="ru.citeck.ecos.livetemplates.functions.alfresco.AlfrescoPropertyEnumMacro"/>
        <liveTemplateMacro implementation="ru.citeck.ecos.livetemplates.functions.alfresco.AlfrescoAspectEnumMacro"/>
        <liveTemplateMacro
                implementation="ru.citeck.ecos.livetemplates.functions.alfresco.AlfrescoAssociationEnumMacro"/>
        <liveTemplateMacro
                implementation="ru.citeck.ecos.livetemplates.functions.alfresco.AlfrescoChildAssociationEnumMacro"/>

        <notificationGroup id="ECOS" displayType="BALLOON"/>

    </extensions>

    <extensionPoints>
        <extensionPoint name="fileType" interface="ru.citeck.ecos.files.FileType"/>
        <extensionPoint name="fileDeployer" interface="ru.citeck.ecos.files.FileDeployer"/>
        <extensionPoint name="fileFetcher" interface="ru.citeck.ecos.files.FileFetcher"/>
        <extensionPoint name="fileIndexer" interface="ru.citeck.ecos.index.EcosFileIndexer"/>
        <extensionPoint name="navigateInFileItemsProvider"
                        interface="ru.citeck.ecos.files.NavigateInFileItemsProvider"/>
        <extensionPoint name="psiElementValueResolver" interface="ru.citeck.ecos.references.PsiElementValueResolver"/>
        <extensionPoint name="completionProvider" interface="ru.citeck.ecos.completion.CompletionProvider"/>
        <extensionPoint name="searchScope" beanClass="ru.citeck.ecos.files.scopes.EcosSearchScope"/>
    </extensionPoints>

    <extensions defaultExtensionNs="ru.citeck.ecos">

        <fileType implementation="ru.citeck.ecos.files.types.AlfrescoModel"/>
        <fileType implementation="ru.citeck.ecos.files.types.AlfrescoViewRepository"/>
        <fileType implementation="ru.citeck.ecos.files.types.AlfrescoConfig"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Form$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Form$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Action$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Action$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.DataType$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.DataType$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Permissions$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Permissions$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.PermissionSettings$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.PermissionSettings$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.KanbanBoard$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.KanbanBoard$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Config$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Config$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.ModulePatch$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.ModulePatch$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Dashboard$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Dashboard$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Journal$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Journal$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Localization$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Localization$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Menu$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Menu$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.NumTemplate$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.NumTemplate$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.CamelDsl$YAML"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.CamelDsl$JSON"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Bpmn"/>
        <fileType implementation="ru.citeck.ecos.files.types.ecos.Dmn"/>
        <fileType implementation="ru.citeck.ecos.files.types.CmmnProcessDefinition"/>
        <fileType implementation="ru.citeck.ecos.files.types.XmlBeanDefinitions"/>
        <fileType implementation="ru.citeck.ecos.files.types.Java"/>
        <fileType implementation="ru.citeck.ecos.files.types.JavaScript"/>

        <searchScope name="Form" class="ru.citeck.ecos.files.types.ecos.Form"/>
        <searchScope name="Action" class="ru.citeck.ecos.files.types.ecos.Action"/>
        <searchScope name="Data type" class="ru.citeck.ecos.files.types.ecos.DataType"/>
        <searchScope name="Permissions" class="ru.citeck.ecos.files.types.ecos.Permissions"/>
        <searchScope name="Permission Settings" class="ru.citeck.ecos.files.types.ecos.PermissionSettings"/>
        <searchScope name="Kanban Board" class="ru.citeck.ecos.files.types.ecos.KanbanBoard"/>
        <searchScope name="Config" class="ru.citeck.ecos.files.types.ecos.Config"/>
        <searchScope name="Module Patch" class="ru.citeck.ecos.files.types.ecos.ModulePatch"/>
        <searchScope name="Dashboard" class="ru.citeck.ecos.files.types.ecos.Dashboard"/>
        <searchScope name="Journal" class="ru.citeck.ecos.files.types.ecos.Journal"/>
        <searchScope name="Localization" class="ru.citeck.ecos.files.types.ecos.Localization"/>
        <searchScope name="Menu" class="ru.citeck.ecos.files.types.ecos.Menu"/>
        <searchScope name="Number Template" class="ru.citeck.ecos.files.types.ecos.NumTemplate"/>
        <searchScope name="Camel DSL" class="ru.citeck.ecos.files.types.ecos.CamelDsl"/>
        <searchScope name="Alfresco Model" class="ru.citeck.ecos.files.types.AlfrescoModel"/>

        <fileDeployer implementation="ru.citeck.ecos.files.deployers.JsonEcosArtifactDeployer"/>
        <fileDeployer implementation="ru.citeck.ecos.files.deployers.YamlEcosArtifactDeployer"/>
        <fileDeployer implementation="ru.citeck.ecos.files.deployers.XmlEcosArtifactDeployer"/>
        <fileDeployer implementation="ru.citeck.ecos.files.deployers.TomcatFileDeployer"/>
        <fileDeployer implementation="ru.citeck.ecos.files.deployers.TomcatFileClipboardDeployer"/>
        <fileDeployer implementation="ru.citeck.ecos.files.deployers.AlfrescoNodeDeployer"/>
        <fileDeployer implementation="ru.citeck.ecos.files.deployers.AlfrescoConfigDeployer"/>

        <fileFetcher implementation="ru.citeck.ecos.files.fetchers.JsonEcosArtifactFetcher"/>
        <fileFetcher implementation="ru.citeck.ecos.files.fetchers.YamlEcosArtifactFetcher"/>
        <fileFetcher implementation="ru.citeck.ecos.files.fetchers.XmlEcosArtifactFetcher"/>
        <fileFetcher implementation="ru.citeck.ecos.files.fetchers.CmmnProcessDefinitionFetcher"/>

        <fileIndexer implementation="ru.citeck.ecos.index.indexers.EcosArtifactIndexer"/>
        <fileIndexer implementation="ru.citeck.ecos.index.indexers.CmmnIndexer"/>
        <fileIndexer implementation="ru.citeck.ecos.index.indexers.AlfrescoModelIndexer"/>
        <fileIndexer implementation="ru.citeck.ecos.index.indexers.AlfrescoContentNodesIndexer"/>
        <fileIndexer implementation="ru.citeck.ecos.index.indexers.XmlBeanDefinitionIndexer"/>
        <fileIndexer implementation="ru.citeck.ecos.index.indexers.qname.AlfrescoQNameIndexer"/>

        <navigateInFileItemsProvider
                implementation="ru.citeck.ecos.files.navigateItemsProviders.JsonFormItemsProvider"/>
        <navigateInFileItemsProvider
                implementation="ru.citeck.ecos.files.navigateItemsProviders.JsonJournalItemsProvider"/>
        <navigateInFileItemsProvider
                implementation="ru.citeck.ecos.files.navigateItemsProviders.AlfrescoModelItemsProvider"/>

        <psiElementValueResolver
                implementation="ru.citeck.ecos.references.resolvers.PsiLiteralExpressionValueResolver"/>
        <psiElementValueResolver implementation="ru.citeck.ecos.references.resolvers.JsonStringLiteralValueResolver"/>
        <psiElementValueResolver implementation="ru.citeck.ecos.references.resolvers.YAMLScalarValueResolver"/>
        <psiElementValueResolver implementation="ru.citeck.ecos.references.resolvers.XmlAttributeValueValueResolver"/>
        <psiElementValueResolver implementation="ru.citeck.ecos.references.resolvers.XmlTagValueResolver"/>

        <completionProvider implementation="ru.citeck.ecos.completion.java.providers.QNamesCompletionProvider"/>

    </extensions>

    <actions>

        <group id="ru.citeck.ecos.CreateEcosArtifact" text="Ecos Artifact" popup="true" icon="Icons.CiteckLogo">
            <add-to-group group-id="NewGroup" anchor="first"/>
            <action id="ru.citeck.ecos.templates.files.CreateFormAction"
                    class="ru.citeck.ecos.templates.files.CreateFormAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateJournalAction"
                    class="ru.citeck.ecos.templates.files.CreateJournalAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateDataTypeAction"
                    class="ru.citeck.ecos.templates.files.CreateDataTypeAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateNumberTemplateAction"
                    class="ru.citeck.ecos.templates.files.CreateNumberTemplateAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateDashboardAction"
                    class="ru.citeck.ecos.templates.files.CreateDashboardAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateMenuAction"
                    class="ru.citeck.ecos.templates.files.CreateMenuAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateLocalizationAction"
                    class="ru.citeck.ecos.templates.files.CreateLocalizationAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateKanbanBoardAction"
                    class="ru.citeck.ecos.templates.files.CreateKanbanBoardAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateBpmnAction"
                    class="ru.citeck.ecos.templates.files.CreateBpmnAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateDmnAction"
                    class="ru.citeck.ecos.templates.files.CreateDmnAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreateCamelDslAction"
                    class="ru.citeck.ecos.templates.files.CreateCamelDslAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreatePermissionsAction"
                    class="ru.citeck.ecos.templates.files.CreatePermissionsAction"
                    icon="Icons.CiteckLogo"/>
            <action id="ru.citeck.ecos.templates.files.CreatePermissionSettingsAction"
                    class="ru.citeck.ecos.templates.files.CreatePermissionSettingsAction"
                    icon="Icons.CiteckLogo"/>
        </group>


        <action id="ru.citeck.ecos.actions.DeployFile" class="ru.citeck.ecos.actions.DeployFile"
                text="Deploy File" description="Deploy file" icon="AllIcons.Actions.Uninstall">
            <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="D"/>
            <add-to-group group-id="EditorContextBarMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="ru.citeck.ecos.actions.FetchFile" class="ru.citeck.ecos.actions.FetchFile"
                text="Fetch File" description="Fetch file" icon="AllIcons.Actions.Install">
            <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="F"/>
            <add-to-group group-id="EditorContextBarMenu" anchor="last"/>
        </action>
        <action id="Ecos.ExecuteAlfrescoJs" class="ru.citeck.ecos.actions.ExecuteAlfrescoJs"
                text="Execute Alfresco Js"
                description="Execute alfresco js" icon="AllIcons.Actions.Execute">
            <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="E"/>
            <add-to-group group-id="EditorContextBarMenu" anchor="last"/>
        </action>

        <group id="ru.citeck.ecos.MainMenu" text="Ecos" popup="true">
            <add-to-group group-id="MainMenu" anchor="last"/>
            <action id="ru.citeck.ecos.actions.EcosSearchEveryWhereAction"
                    class="ru.citeck.ecos.actions.EcosSearchEveryWhereAction"
                    text="Search Everywhere"
                    description="Search everywhere">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="N"/>
            </action>
            <action id="ru.citeck.ecos.actions.NavigateInFileAction"
                    class="ru.citeck.ecos.actions.NavigateInFileAction"
                    text="Navigate in File"
                    description="Navigate in File" icon="AllIcons.CodeWithMe.CwmJump">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="G"/>
                <add-to-group group-id="EditorContextBarMenu" anchor="last"/>
            </action>
            <action id="ru.citeck.ecos.actions.OpenArtifactInBrowser"
                    class="ru.citeck.ecos.actions.OpenArtifactInBrowser"
                    text="Open in Browser"
                    description="Open in Browser" icon="AllIcons.General.Web">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="B"/>
                <add-to-group group-id="EditorContextBarMenu" anchor="last"/>
            </action>
            <action id="Ecos.ExecuteAlfrescoJsFromScratch"
                    class="ru.citeck.ecos.actions.ExecuteAlfrescoJsFromScratch"
                    text="Execute Afresco JS"
                    description="Execute Afresco JS"
                    icon="AllIcons.FileTypes.JavaScript">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt E" second-keystroke="J"/>
            </action>
        </group>

        <action id="GenerateEcosFormComponent" class="ru.citeck.ecos.actions.codeinsight.GenerateEcosFormComponent"
                text="Component" icon="Icons.CiteckLogo">
            <add-to-group group-id="GenerateGroup"/>
        </action>
        <action id="GenerateEcosFormLocalization"
                class="ru.citeck.ecos.actions.codeinsight.GenerateEcosFormLocalization" text="Localization"
                icon="Icons.CiteckLogo">
            <add-to-group group-id="GenerateGroup"/>
        </action>

    </actions>

</idea-plugin>